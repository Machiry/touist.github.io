<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Touist__SatSolve (touist.Touist__SatSolve)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">touist</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Touist__SatSolve</span></h1></header><p><b>Requires <code class="code">minisat</code></b> Process a CNF AST to clauses in order to solve
them with Minisat.</p><h3>CNF to clauses</h3><div class="spec val" id="val-minisat_clauses_of_cnf"><a href="#val-minisat_clauses_of_cnf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>minisat_clauses_of_cnf : <a href="../Touist/Types/Ast/index.html#type-t">Touist.Types.Ast.t</a> <span class="keyword">&#8209;&gt;</span> Minisat.Lit.t list list<span class="keyword"> * </span>(Minisat.Lit.t, string) Hashtbl.t</code></div><div class="doc"><p><code class="code">minisat_clauses_of_cnf ast</code> takes a CNF <code class="code">ast</code> and outputs
</p><ul><li>a list of lists of Minisat litterals,</li><li>a mapping table (Minisat litterals -&gt; name of the proposition)</li></ul></div></div><h3>Solving clauses (using Minisat)</h3><div class="spec module" id="module-Model"><a href="#module-Model" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Model/index.html">Model</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-ModelSet"><a href="#module-ModelSet" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="ModelSet/index.html">ModelSet</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec val" id="val-solve_clauses"><a href="#val-solve_clauses" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>solve_clauses : ?&#8288;verbose:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;print:((Minisat.Lit.t, string) Hashtbl.t <span class="keyword">&#8209;&gt;</span> <a href="Model/index.html#type-t">Model.t</a> <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> ?&#8288;continue:(<a href="Model/index.html#type-t">Model.t</a> <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> bool) <span class="keyword">&#8209;&gt;</span> (Minisat.Lit.t list list<span class="keyword"> * </span>(Minisat.Lit.t, string) Hashtbl.t) <span class="keyword">&#8209;&gt;</span> <a href="index.html#module-ModelSet">ModelSet</a>.t</code></div><div class="doc"><p><code class="code">solve_clauses</code> finds the models for the given clauses.</p><p><code class="code">print model N </code> is a function that will print a model as soon as it is
found. <code class="code">N</code> is the number of the model, it begins at 1.
It can be useful to print the models as they appear because finding all
models (if <code class="code">limit</code> is large) can be extremely long.
Example: <code class="code">~print:(SatSolve.Model.pprint table model)</code></p><p><code class="code">verbose</code> allows to turn on the verbose mode of minisat; apparently, this
minisat feature doesn't seem to be working and doesn't display any time
information.</p><p><code class="code">continue model nth</code> is a function called after every model that has been
found. <code class="code">model</code> contains the found model and <code class="code">N</code> says that this model was
the nth model found. This function tells <code class="code">solve_clauses</code> to go on searching
models or not.</p></div></div><div class="spec val" id="val-string_of_clause"><a href="#val-string_of_clause" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>string_of_clause : Minisat.Lit.t list <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">string_of_clause</code> dumps the clause in its literal-number form:
e.g., 1 -5 3 9 -2 -7</p></div></div><div class="spec val" id="val-string_of_clauses"><a href="#val-string_of_clauses" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>string_of_clauses : Minisat.Lit.t list list <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">string_of_clauses</code> does <a href="index.html#val-string_of_clause">string_of_clause</a> with newlines between clauses.</p></div></div><h3>Print DIMACS</h3><div class="spec val" id="val-print_dimacs"><a href="#val-print_dimacs" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>print_dimacs : ?&#8288;line_begin:string <span class="keyword">&#8209;&gt;</span> ?&#8288;debug_dimacs:bool <span class="keyword">&#8209;&gt;</span> (Minisat.Lit.t list list<span class="keyword"> * </span>(Minisat.Lit.t, string) Hashtbl.t) <span class="keyword">&#8209;&gt;</span> ?&#8288;out_table:Pervasives.out_channel <span class="keyword">&#8209;&gt;</span> Pervasives.out_channel <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">print_dimacs (clauses, table) out</code> takes the
result of <a href="index.html#val-minisat_clauses_of_cnf">minisat_clauses_of_cnf</a> and prints the following to <code class="code">out</code>:
</p><ul><li>1) If <code class="code">~out_table</code> is given, print the mapping table from litterals
integers to names. If <code class="code">out</code> and <code class="code">out_table</code> are the same, then the
mapping table will be printed in DIMACS comments
(e.g., 'c p(a,b) 5').</li><li>2) the DIMACS standard header line ('p cnf 3 2')</li><li>3) the quantifiers lines grouped (one quantifier per line, beginning with
'e' or 'a' and ending by 0)</li><li>4) the clauses (one conjunction per line, one line is a disjunction,
minus means 'not').</li></ul><p>See on Google &quot;Satisfiability Suggested Format&quot; (May 8, 1993)</p><p><code class="code">line_begin</code> allows to add a prefix to all outputed lines; it has nothing
to do with the 'table' prefix (i.e., 'c '). This prefix allows me to print
debug information, i.e., add 'debug:' to every printed line.</p></div></div></body></html>